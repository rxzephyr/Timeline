(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,n){e.exports=n(352)},352:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(60),o=n.n(i),s=n(371),c=n(372),l=n(373),u=n(368),p=n(167),d=n.n(p)()(),h=n(24),m=n(53),g=n(169),f=n(7),b="SWITCH_HOME",y="SWITCH_INDEX",v="SWITCH_PUBLISH",E="SWITCH_LOGIN",O="SWITCH_REGISTER",j="ILLEGAL_ACCESS",C="CLOSE_ILLEGAL_ACCESS",S="LOGIN_SUCCESS",k="LOGIN_FAIL",w="CLOSE_LOGIN_FAIL",x="USERID_SET",_="CHANGE_PASSWORD",T="CHANGE_USERNAME",I="LOG_OUT",N="REGISTER_SUCCESS",A="REGISTER_FAIL",L="CLOSE_REGISTER_FAIL",B="CHANGE_AGREED",R="CHANGE_REG_NICK",F="CHANGE_REG_PASS",P="CHANGE_REG_NAME",U="TIMELINE_INIT",D="GET_TIMELINE",M="CONTENTID_SET",H="UPDATE_TIMELINE",G="UPDATE",z="MORE_TIMELINE",W="MORE",J="PUBLISH_SUCCESS",Y="PUBLISH_FAIL",X="CLOSE_PUBLISH_FAIL",q="CLOSE_PUBLISH_SUCCESS",K="PICTURE",Q="CHANGE_TEXT",V={home:"active item",index:"item",publish:"item",login:"item",register:"item",illegal:!1};var Z={username:"",password:"",isLogin:!1,failed:!1,jwtToken:"",userid:""};var $={displayname:"",username:"",password:"",failed:!1,agreed:!1};var ee={currentEvents:[],start:"",end:"",contentid:0};var te={text:"",imgUrl:"",failed:!1,successful:!1};var ne=Object(m.c)({_currentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;switch((arguments.length>1?arguments[1]:void 0).type){case b:return Object(f.a)({},e,{home:"active item",index:"item",publish:"item",login:"item",register:"item"});case y:return Object(f.a)({},e,{home:"item",index:"active item",publish:"item",login:"item",register:"item"});case v:return Object(f.a)({},e,{home:"item",index:"item",publish:"active item",login:"item",register:"item"});case E:return Object(f.a)({},e,{home:"item",index:"item",publish:"item",login:"active item",register:"item"});case O:return Object(f.a)({},e,{home:"item",index:"item",publish:"item",login:"item",register:"active item"});case j:return Object(f.a)({},e,{illegal:!0});case C:return Object(f.a)({},e,{illegal:!1});default:return e}},_loginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(f.a)({},e,{username:t.payload});case _:return Object(f.a)({},e,{password:t.payload});case S:return Object(f.a)({},e,{isLogin:!0,failed:!1,jwtToken:t.payload});case x:return Object(f.a)({},e,{userid:t.payload});case k:return Object(f.a)({},e,{isLogin:!1,failed:!0});case I:return Object(f.a)({},e,{username:"",password:"",isLogin:!1,failed:!1,jwtToken:"",userid:""});case w:return Object(f.a)({},e,{failed:!1});default:return e}},_registerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(f.a)({},e,{failed:!1,displayname:"",username:"",password:"",agreed:!1});case A:return Object(f.a)({},e,{failed:!0});case P:return Object(f.a)({},e,{username:t.payload});case R:return Object(f.a)({},e,{displayname:t.payload});case F:return Object(f.a)({},e,{password:t.payload});case L:return Object(f.a)({},e,{failed:!1});case B:return Object(f.a)({},e,{agreed:!e.agreed});default:return e}},_timelineEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:var n=new Date,a=(n=Object.assign(n,t.payload)).getFullYear();n.setFullYear(a-1);var r=new Date(t.payload);return Object(f.a)({},e,{start:n,end:r});case D:var i=t.payload.map(function(e,t){var n=new Date(Date.parse(e.publishTime)),a=JSON.parse(e.content);return{name:e.displayName,time:n.toDateString(),content:a.data,img:a.imgUrl}});return Object(f.a)({},e,{currentEvents:i});case H:var o=t.payload.map(function(e,t){var n=new Date(Date.parse(e.publishTime)),a=JSON.parse(e.content);return{name:e.displayName,time:n.toDateString(),content:a.data,img:a.imgUrl}}).concat(e.currentEvents);return Object(f.a)({},e,{currentEvents:o});case z:var s=t.payload.map(function(e,t){var n=new Date(Date.parse(e.publishTime)),a=JSON.parse(e.content);return{name:e.displayName,time:n.toDateString(),content:a.data,img:a.imgUrl}}),c=e.currentEvents.concat(s);return Object(f.a)({},e,{currentEvents:c});case G:var l=new Date(e.end);return Object(f.a)({},e,{start:l,end:t.payload});case W:case M:return Object(f.a)({},e,{contentid:t.payload});default:return e}},_publishEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(f.a)({},e,{text:t.payload});case K:return Object(f.a)({},e,{imgUrl:t.payload});case J:return Object(f.a)({},e,{failed:!1,text:"",successful:!0});case Y:return Object(f.a)({},e,{failed:!0});case X:return Object(f.a)({},e,{failed:!1});case q:return Object(f.a)({},e,{successful:!1});default:return e}}}),ae=Object(m.a)(g.a),re=Object(m.d)(ne,ae),ie=n(16),oe=n(17),se=n(20),ce=n(18),le=n(19),ue=n(361),pe=(n(49),n(27)),de=n.n(pe),he=n(38);function me(){return{type:b}}function ge(){return{type:y}}function fe(){return{type:E}}function be(){return{type:O}}function ye(){return{type:C}}var ve="http://127.0.0.1:8080",Ee=5;function Oe(e){return{type:G,payload:e}}function je(e,t,n){return function(){var t=Object(he.a)(de.a.mark(function t(n){var a;return de.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={contentStartId:-1,end:"",numberToRetrieve:Ee,start:"",user_id:0},t.next=3,fetch(ve+"/api/content/detail/by_id_range",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){console.log(e);var t=e.entity_list.slice().pop().contentId;n({type:M,payload:t}),n({type:D,payload:e.entity_list})}).catch(function(e){console.log(e)});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}function Ce(e,t,n){return function(){var a=Object(he.a)(de.a.mark(function a(r){var i;return de.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={end:n,start:t,user_id:0},a.next=3,fetch(ve+"/api/content/detail/by_period",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){console.log(e),r({type:H,payload:e.entity_list})}).catch(function(e){console.log(e)});case 3:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}function Se(){return{type:w}}function ke(){return{type:L}}var we=n(170),xe=n.n(we),_e="nzw8sov3",Te="https://api.cloudinary.com/v1_1/hlps10425/image/upload";function Ie(e){return{type:Q,payload:e}}function Ne(){return{type:X}}function Ae(){return{type:q}}var Le=n(370),Be=n(369),Re=n(360),Fe=n(367),Pe=n(365),Ue=n(166),De={height:"85vh",backgroundColor:"#efefef"},Me=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).state={visible:!1},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){return r.a.createElement(Le.a,{visible:this.state.visible,animation:"fade down",during:1e3},r.a.createElement(Be.a,{vertical:!0,style:De},!0===this.props.illegal?r.a.createElement("div",{className:"ui floating message"},r.a.createElement("i",{className:"close icon",onClick:this.props.closeIllegalAccess}),r.a.createElement("p",null,"Please login first.")):null,r.a.createElement(Re.a,{text:!0,style:{margin:"7em 0em 0em 0em",color:"#7f7f7f"}},r.a.createElement(Fe.a,{as:"h1",content:"Time-Line",style:{fontSize:"4em",color:"#7f7f7f"}}),r.a.createElement(Fe.a,{as:"h2",content:"Record every bit of your life",style:{margin:"1em 0em 5em 0em",color:"#7f7f7f"}}),r.a.createElement(Pe.a,{as:ue.a,to:"/main",size:"huge",onClick:this.props.switchIndex,style:{backgroundColor:"#1BB394",color:"#E5FFFB"}},"Get Started",r.a.createElement(Ue.a,{name:"arrow right"})))))}}]),t}(r.a.Component),He=Object(h.b)(function(e,t){return{illegal:e._currentPage.illegal}},function(e,t){return{switchIndex:function(){e(ge())},closeIllegalAccess:function(){e(ye())}}})(Me),Ge=n(65),ze={container:{position:"relative",fontSize:"80%",fontWeight:300,padding:"10px 0",width:"95%",margin:"0 auto"},containerBefore:{content:"",position:"absolute",top:0,height:"100%",width:2,background:"#a0b2b8"},"containerBefore--left":{left:"16px"},"containerBefore--right":{right:"14px"},containerAfter:{content:"",display:"table",clear:"both"},event:{position:"relative",margin:"10px 0"},"event--left":{paddingLeft:45,textAlign:"left"},"event--right":{paddingRight:45,textAlign:"right"},eventAfter:{clear:"both",content:"",display:"table"},eventType:{position:"absolute",top:0,borderRadius:"50%",width:30,height:30,marginLeft:1,background:"#e9f0f5",border:"2px solid #000000",display:"flex"},"eventType--left":{left:0},"eventType--right":{right:0},materialIcons:{display:"flex",width:32,height:32,position:"relative",justifyContent:"center",alignSelf:"center",alignItems:"center"},eventContainer:{position:"relative"},eventContainerBefore:{top:24,left:"100%",borderColor:"transparent",borderLeftColor:"#ffffff"},time:{marginBottom:3},subtitle:{marginTop:2,fontSize:"85%",color:"#777"},message:{width:"98%",backgroundColor:"#ffffff",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",marginTop:"1em",marginBottom:"1em",lineHeight:1.6,padding:"0.5em 1em"},messageAfter:{clear:"both",content:"",display:"table"},actionButtons:{marginTop:-20},"actionButtons--left":{float:"left",textAlign:"left"},"actionButtons--right":{float:"right",textAlign:"right"},card:{boxShadow:"rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px",backgroundColor:"rgb(255, 255, 255)"},cardTitle:{backgroundColor:"#7BB1EA",padding:10,color:"#fff"},cardBody:{backgroundColor:"#ffffff",marginBottom:"1em",lineHeight:1.6,padding:10,minHeight:40},blipStyle:{position:"absolute",top:"50%",marginTop:"9px"},toggleEnabled:{cursor:"pointer"}},We=function(e){function t(){return Object(ie.a)(this,t),Object(se.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.orientation,n=void 0===t?"left":t,a=e.children,i=e.lineColor,o=e.lineStyle,s=e.style,c=Object(Ge.a)(e,["orientation","children","lineColor","lineStyle","style"]),l=r.a.Children.map(a,function(e){return r.a.cloneElement(e,{orientation:n})}),u="right"===n?Object(f.a)({},ze["containerBefore--right"]):Object(f.a)({},ze["containerBefore--left"]),p=Object(f.a)({},u,o);return p=i?Object(f.a)({},p,{background:i}):p,r.a.createElement("div",null,r.a.createElement("section",Object.assign({style:Object(f.a)({},ze.container,s)},c),r.a.createElement("div",{style:Object(f.a)({},ze.containerBefore,p)}),l,r.a.createElement("div",{style:ze.containerAfter})))}}]),t}(a.Component);We.defaultProps={style:{},lineStyle:{}};var Je=We,Ye=n(40),Xe=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).state={showContent:n.props.showContent},n.toggleContent=n.toggleContent.bind(Object(Ye.a)(Object(Ye.a)(n))),n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.showContent!==e.showContent&&this.state({showContent:this.props.showContent})}},{key:"mergeNotificationStyle",value:function(e,t,n){var a=e?Object(f.a)({},ze.eventType,{color:e,borderColor:e}):ze.eventType,r="right"===n?Object(f.a)({},ze["eventType--right"]):Object(f.a)({},ze["eventType--left"]);return Object(f.a)({},a,r,t)}},{key:"mergeContentStyle",value:function(e){var t=this.showAsCard()?ze.cardBody:ze.message;return e?Object(f.a)({},t,e):t}},{key:"timeStyle",value:function(){return this.showAsCard()?ze.time:Object(f.a)({},ze.time,{color:"#303e49"})}},{key:"showAsCard",value:function(){return"card"===this.props.container}},{key:"containerStyle",value:function(){var e=this.props.style,t=Object(f.a)({},ze.eventContainer,e);return this.showAsCard()?Object(f.a)({},ze.card,t):t}},{key:"toggleStyle",value:function(){var e=this.props,t=e.container,n=e.cardHeaderStyle,a=e.collapsible,r="card"===t?Object(f.a)({},ze.cardTitle,n):{};return a?Object(f.a)({},ze.toggleEnabled,r):r}},{key:"toggleContent",value:function(){this.setState({showContent:!this.state.showContent})}},{key:"renderChildren",value:function(){var e=this.props,t=e.collapsible,n=e.contentStyle;return t&&this.state.showContent||!t?r.a.createElement("div",{style:this.mergeContentStyle(n)},this.props.children,r.a.createElement("div",{style:ze.messageAfter})):r.a.createElement("span",{style:{fontWeight:500,fontSize:16,cursor:"pointer"},onClick:this.toggleContent},"\u2026")}},{key:"render",value:function(){var e=this.props,t=e.createdAt,n=e.title,a=e.subtitle,i=e.iconStyle,o=e.bubbleStyle,s=e.buttons,c=e.icon,l=e.iconColor,u=e.titleStyle,p=e.subtitleStyle,d=e.orientation,h=e.collapsible,m=Object(Ge.a)(e,["createdAt","title","subtitle","iconStyle","bubbleStyle","buttons","icon","iconColor","titleStyle","subtitleStyle","orientation","collapsible"]),g="right"===d?Object(f.a)({},ze["event--right"]):Object(f.a)({},ze["event--left"]),b="left"===d?Object(f.a)({},ze["actionButtons--right"]):Object(f.a)({},ze["actionButtons--left"]);return r.a.createElement("div",{style:Object(f.a)({},ze.event,g)},r.a.createElement("div",{style:this.mergeNotificationStyle(l,o,d)},r.a.createElement("span",{style:Object(f.a)({},ze.materialIcons,i)},c)),r.a.createElement("div",Object.assign({},m,{style:this.containerStyle()}),r.a.createElement("div",{style:ze.eventContainerBefore}),r.a.createElement("div",{style:this.toggleStyle(),onClick:h&&this.toggleContent},t&&r.a.createElement("div",{style:this.timeStyle()},t),r.a.createElement("div",{style:u},n),a&&r.a.createElement("div",{style:Object(f.a)({},ze.subtitle,p)},a),r.a.createElement("div",{style:Object(f.a)({},ze.actionButtons,b)},s)),this.props.children&&this.renderChildren()),r.a.createElement("div",{style:ze.eventAfter}))}}]),t}(a.Component);Xe.defaultProps={createdAt:void 0,iconStyle:{},bubbleStyle:{},contentStyle:{},cardHeaderStyle:{},style:{},titleStyle:{},subtitleStyle:{},orientation:"left",showContent:!1};var qe=Xe,Ke=function(e){function t(){return Object(ie.a)(this,t),Object(se.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"mergeNotificationStyle",value:function(e){return e?Object(f.a)({},ze.eventType,{color:e,borderColor:e}):ze.eventType}},{key:"iconStyle",value:function(e){return Object(f.a)({},ze.materialIcons,e)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.iconStyle,a=e.icon,i=e.orientation,o=e.iconColor,s=e.style,c=Object(Ge.a)(e,["title","iconStyle","icon","orientation","iconColor","style"]),l="right"===i?Object(f.a)({},ze["event--right"]):Object(f.a)({},ze["event--left"]);return r.a.createElement("div",{style:Object(f.a)({},ze.event,{marginBottom:50},s)},r.a.createElement("div",{style:this.mergeNotificationStyle(o)},r.a.createElement("span",{style:this.iconStyle(n)},a)),r.a.createElement("div",Object.assign({},c,{style:Object(f.a)({},ze.blipStyle,l)}),r.a.createElement("div",null,t)),r.a.createElement("div",{style:ze.eventAfter}))}}]),t}(a.Component);Ke.defaultProps={iconStyle:{},style:{}};var Qe=n(353),Ve={backgroundColor:"rgb(238, 239, 239)",fontFamily:"Arial",minHeight:"50em"},Ze={"word-wrap":"break-word","word-break":"normal"},$e=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).handleUpdateClick=function(){var e=new Date;n.props.updateTimeline(n.props.token,n.props.end.toISOString(),e.toISOString()),n.props.onUpdate(e)},n.handleMoreClick=function(){var e=Number(n.props.contentid),t=0;0!==(t=e<5?e:5)&&(n.props.moreTimeline(n.props.token,n.props.contentid,t),n.props.onMore(e-t))},n.state={visible:!1},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){var e=this.props.timelineEvents.map(function(e,t){return r.a.createElement(qe,{title:e.name,createdAt:e.time,titleStyle:{fontSize:"small"}},""===e.img?null:r.a.createElement(Qe.a,{src:e.img}),r.a.createElement("div",{style:Ze},e.content))});return r.a.createElement(Le.a,{visible:this.state.visible,animation:"fade down",during:1e3},r.a.createElement(Be.a,{style:Ve},r.a.createElement(Re.a,{className:"main ui"},r.a.createElement(Fe.a,{as:"h2",className:"ui icon header",style:{margin:"30px 0px 0px 0px",color:"#7f7f7f"}},r.a.createElement(Ue.a,{name:"clock icon"}),r.a.createElement("div",{className:"content"},"Time Line")),r.a.createElement(Pe.a,{floated:!0,content:"Update",onClick:this.handleUpdateClick,style:{margin:"50px",backgroundColor:"#1BB394",color:"#E5FFFB",float:"right"}}),r.a.createElement(Je,{lineColor:"#7f7f7f",style:{fontSize:"medium",margin:"0px 0px 0px 35px"}},e,0===this.props.contentid?r.a.createElement(Pe.a,{floated:!0,"data-tooltip":"You have reached the bottom","data-position":"top center",content:"More...",onClick:this.handleMoreClick,style:{margin:"50px",backgroundColor:"#1BB394",color:"#E5FFFB",float:"right"}}):r.a.createElement(Pe.a,{floated:!0,content:"More...",onClick:this.handleMoreClick,style:{margin:"50px",backgroundColor:"#1BB394",color:"#E5FFFB",float:"right"}})))))}}]),t}(r.a.Component),et=Object(h.b)(function(e,t){return{timelineEvents:e._timelineEvents.currentEvents,token:e._loginReducer.jwtToken,start:e._timelineEvents.start,end:e._timelineEvents.end,contentid:e._timelineEvents.contentid}},function(e,t){return{onGetTimeline:function(t,n,a){e(je(t))},updateTimeline:function(t,n,a){e(Ce(t,n,a))},moreTimeline:function(t,n,a){e(function(e,t,n){return function(){var a=Object(he.a)(de.a.mark(function a(r){var i;return de.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={contentStartId:t,end:"",numberToRetrieve:n,start:"",user_id:0},a.next=3,fetch(ve+"/api/content/detail/by_id_range",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){console.log(e),r({type:z,payload:e.entity_list})}).catch(function(e){console.log(e)});case 3:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},onUpdate:function(t){e(Oe(t))},onMore:function(t){e(function(e){return{type:W,payload:e}}(t))}}})($e),tt=n(366),nt=n(362),at=n(363),rt=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).expireTime=e.expireTime,n.tick=n.tick.bind(Object(Ye.a)(Object(Ye.a)(n))),n.handleCLick=n.handleCLick.bind(Object(Ye.a)(Object(Ye.a)(n))),n.state={isClicked:!1,secondElapsed:0},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"tick",value:function(){this.setState({secondElapsed:this.state.secondElapsed+1})}},{key:"handleCLick",value:function(){if(this.setState({isClicked:!0}),this.interval=setInterval(this.tick,1e3),"Login"===this.props.name){var e=this.props.username,t=this.props.password;this.props.onLogin(t,e)}else if("Register"===this.props.name){var n=this.props.displayname,a=this.props.regname,r=this.props.regpassword;!this.props.agreed||""===n||""===a||""===r||n.length>15||a.length>15||r.length>255?(this.setState({isClicked:!1,secondElapsed:0}),clearInterval(this.interval),this.props.registerFailed()):this.props.onRegister(n,r,a)}}},{key:"render",value:function(){return this.state.secondElapsed>this.props.expireTime&&(this.setState({isClicked:!1,secondElapsed:0}),clearInterval(this.interval)),this.state.isClicked?r.a.createElement(Pe.a,{fluid:!0,loading:!0,style:{backgroundColor:"#1BB394",color:"#E5FFFB"},size:"large",content:this.props.name}):r.a.createElement(Pe.a,{fluid:!0,style:{backgroundColor:"#1BB394",color:"#E5FFFB"},size:"large",animated:"fade",onClick:this.handleCLick},r.a.createElement(Pe.a.Content,{visible:!0},this.props.name),r.a.createElement(Pe.a.Content,{hidden:!0},r.a.createElement(Ue.a,{name:"arrow right"})))}}]),t}(r.a.Component);rt.defaultProp={expireTime:2};var it=Object(h.b)(function(e,t){return{username:e._loginReducer.username,password:e._loginReducer.password,displayname:e._registerReducer.displayname,regname:e._registerReducer.username,regpassword:e._registerReducer.password,isLogin:e._loginReducer.isLogin,agreed:e._registerReducer.agreed}},function(e,t){return{onLogin:function(t,n){e(function(e,t){return function(){var n=Object(he.a)(de.a.mark(function n(a){var r;return de.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={password:e,username:t},n.next=3,fetch(ve+"/login",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(console.log(e),"200"===e.status){a({type:S,payload:e.jwtToken}),a({type:x,payload:e.result});var t=new Date;a({type:U,payload:t});var n=new Date(t),r=n.getFullYear();n.setFullYear(r-1),a(je(e.jwtToken)),a({type:C}),d.push("/"),a(me())}else a({type:k})}).catch(function(e){console.log(e),a({type:k})});case 3:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}(t,n)),e(ge())},onRegister:function(t,n,a){e(function(e,t,n){return function(){var a=Object(he.a)(de.a.mark(function a(r){var i;return de.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i={displayName:e,password:t,username:n},a.next=3,fetch(ve+"/register",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e),"success"===e.result?(r({type:N}),d.push("./login")):r({type:A})}).catch(function(e){console.log(e),r({type:A})});case 3:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}(t,n,a))},registerFailed:function(){e({type:A})}}})(rt),ot=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).state={visible:!1,errorOccurs:!1},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){return r.a.createElement(Le.a,{visible:this.state.visible,animation:"fade down",during:1e3},r.a.createElement(Be.a,{className:"login-form"},r.a.createElement("style",null,"\n\t  body > div,\n\t  body > div > div,\n\t  body > div > div > div.login-form {\n\t    height: 100%;\n\t  }\n\t"),r.a.createElement(tt.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100%"}},r.a.createElement(tt.a.Column,{style:{maxWidth:400}},r.a.createElement(Fe.a,{as:"h2",style:{color:"#1BB394"},textAlign:"center"},"Sign In"),r.a.createElement(nt.a,{className:"attached fluid segment"},r.a.createElement(Be.a,{raised:!0},r.a.createElement(at.a,{error:!0,visible:this.state.errorOccurs,header:"Ehh... Something went wrong?",list:["Take a look at the username and the password. Make sure they are correct."]}),r.a.createElement(nt.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",error:this.state.errorOccurs,value:this.props.username,onChange:this.props.onChangeUsername}),r.a.createElement(nt.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",error:this.state.errorOccurs,value:this.props.password,onChange:this.props.onChangePassword}),r.a.createElement(it,{name:"Login",expireTime:2}))),!0===this.props.failed?r.a.createElement(at.a,{negative:!0},r.a.createElement("i",{className:"close icon",onClick:this.props.closeLoginFail}),r.a.createElement("div",{className:"header"},"Ehh... Something went wrong?"),r.a.createElement("p",null,"Take a look at the username and the password. Make sure they are correct.")):null,r.a.createElement(at.a,null,r.a.createElement(Ue.a,{name:"help"}),"New to us? ",r.a.createElement(ue.a,{to:"/register",style:{color:"#1BB394"},onClick:this.props.switchRegister},"Sign Up"))))))}}]),t}(r.a.Component),st=Object(h.b)(function(e,t){return{username:e._loginReducer.username,password:e._loginReducer.password,isLogin:e._loginReducer.isLogin,failed:e._loginReducer.failed}},function(e,t){return{onChangeUsername:function(t){var n;e((n=t.target.value,{type:T,payload:n}))},onChangePassword:function(t){var n;e((n=t.target.value,{type:_,payload:n}))},switchRegister:function(){e(be())},closeLoginFail:function(){e(Se())}}})(ot),ct=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).state={visible:!1,errorOccurs:!1},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){return r.a.createElement(Le.a,{visible:this.state.visible,animation:"fade down",during:1e3},r.a.createElement(Be.a,{className:"login-form"},r.a.createElement("style",null,"\n\t  body > div,\n\t  body > div > div,\n\t  body > div > div > div.login-form {\n\t    height: 100%;\n\t  }\n\t"),r.a.createElement(tt.a,{textAlign:"center",verticalAlign:"middle",style:{height:"100%"}},r.a.createElement(tt.a.Column,{style:{maxWidth:450}},r.a.createElement(Fe.a,{as:"h2",style:{color:"#1BB394"},textAlign:"center"},"Sign Up"),r.a.createElement(at.a,{attached:!0,header:"Welcome to our site!",content:"Fill in the form below and quickly get a new account"}),r.a.createElement(nt.a,{className:"attached fluid segment"},r.a.createElement(at.a,{error:!0,visible:this.state.errorOccurs,header:"Ehh... Something went wrong?",list:["It seems that the username has been snapped up. Why not try another username?"]}),r.a.createElement(nt.a.Input,{icon:"user",iconPosition:"left",placeholder:"Username(less than 15 characters)",type:"text",error:this.state.errorOccurs,value:this.props.username,onChange:this.props.onChangeRegName}),r.a.createElement(nt.a.Input,{icon:"address card",iconPosition:"left",placeholder:"Nickname(less than 15 characters)",type:"text",value:this.props.displayname,onChange:this.props.onChangeRegNick}),r.a.createElement(nt.a.Input,{icon:"lock",iconPosition:"left",placeholder:"Password(less than 255 characters)",type:"password",value:this.props.password,onChange:this.props.onChangeRegPass}),r.a.createElement(nt.a.Checkbox,{inline:!0,label:"I agree to the terms and conditions",onChange:this.props.changeAgreed}),r.a.createElement(it,{name:"Register",expireTime:2})),!0===this.props.failed?r.a.createElement(at.a,{negative:!0},r.a.createElement("i",{className:"close icon",onClick:this.props.closeRegisterFail}),r.a.createElement("div",{className:"header"},"Ehh... Something went wrong?"),r.a.createElement("p",null,"Take a look at your information. Make sure they are valid and then try again.")):null,r.a.createElement(at.a,null,r.a.createElement(Ue.a,{name:"help"}),"Already have an account? ",r.a.createElement(ue.a,{to:"/login",style:{color:"#1BB394"},onClick:this.props.switchLogin},"Sign In")," instead.")))))}}]),t}(r.a.Component),lt=Object(h.b)(function(e,t){return{displayname:e._registerReducer.displayname,username:e._registerReducer.username,password:e._registerReducer.password,failed:e._registerReducer.failed}},function(e,t){return{onChangeRegName:function(t){var n;e((n=t.target.value,{type:P,payload:n}))},onChangeRegNick:function(t){var n;e((n=t.target.value,{type:R,payload:n}))},onChangeRegPass:function(t){var n;e((n=t.target.value,{type:F,payload:n}))},switchLogin:function(){e(fe())},closeRegisterFail:function(){e(ke())},changeAgreed:function(){e({type:B})}}})(ct),ut=n(190),pt=n(5),dt=n.n(pt),ht=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).state={uploadedFile:null},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"onImageDrop",value:function(e){this.setState({uploadedFile:e[0]}),this.props.pictureSet(e[0])}},{key:"render",value:function(){return r.a.createElement(nt.a,{style:{margin:"1em 7em 1em 7em"}},r.a.createElement(Be.a,{className:"FileUpload"},""===this.props.imgUrl?r.a.createElement(ut.a,{onDropAccepted:this.onImageDrop.bind(this),multiple:!1,accept:"image/*",maxSize:1048576,onDropRejected:function(){alert("rejected!")}},function(e){var t=e.getRootProps,n=e.getInputProps,a=e.isDragActive;return r.a.createElement(Be.a,Object.assign({},t(),{className:dt()("dropzone",{"dropzone--isActive":a})}),r.a.createElement("input",n()),a?r.a.createElement("p",null,"Drop files here..."):r.a.createElement("p",null,"Try dropping some files here, or click to select files to upload(less than 1 MB)."))}):r.a.createElement(Be.a,null,r.a.createElement("p",null,this.state.uploadedFile.name),r.a.createElement(Qe.a,{src:this.props.imgUrl}))))}}]),t}(r.a.Component),mt=Object(h.b)(function(e,t){return{imgUrl:e._publishEvents.imgUrl}},function(e,t){return{pictureSet:function(t){e(function(e){return function(t){xe.a.post(Te).field("upload_preset",_e).field("file",e).end(function(e,n){e&&console.error(e),""!==n.body.secure_url&&t({type:K,payload:n.body.secure_url})})}}(t))}}})(ht),gt={backgroundColor:"rgb(238, 239, 239)",fontFamily:"Arial",minHeight:"100em"},ft=function(e){function t(e){var n;return Object(ie.a)(this,t),(n=Object(se.a)(this,Object(ce.a)(t).call(this,e))).handlePublishClick=function(){""===n.props.text||n.props.text.length>1e3?n.props.publishFail():n.props.publishContent(n.props.token,n.props.userid,n.props.text,n.props.imgUrl)},n.state={visible:!1},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"render",value:function(){var e,t;return e=this.props.failed?r.a.createElement(at.a,{negative:!0},r.a.createElement("i",{className:"close icon",onClick:this.props.closePublishFail}),r.a.createElement("div",{className:"header"},"Ehh... Something went wrong?"),r.a.createElement("p",null,"Take a look at your content. Make sure they are valid and then try again.")):null,t=this.props.successful?r.a.createElement(at.a,{positive:!0},r.a.createElement("i",{className:"close icon",onClick:this.props.closePublishSuccess}),r.a.createElement("div",{className:"header"},"You have successfully published!"),r.a.createElement("p",null,"See your footprint in the TimeLine part.")):null,r.a.createElement(Le.a,{visible:this.state.visible,animation:"fade down",during:1e3},r.a.createElement(Be.a,{style:gt},r.a.createElement(Re.a,{className:"main ui"},r.a.createElement(Fe.a,{as:"h2",className:"ui center aligned icon header",style:{padding:"50px 0px 10px 0px",color:"#7f7f7f"}},r.a.createElement(Ue.a,{name:"pencil alternate"}),"Record Your Time"),r.a.createElement(mt,null),r.a.createElement(nt.a,{style:{margin:"1em 7em 1em 7em"}},r.a.createElement(Be.a,{className:"field"},r.a.createElement("textarea",{value:this.props.text,onChange:this.props.onChangeText,placeholder:"less than 1000 characters"})),r.a.createElement(Pe.a,{onClick:this.handlePublishClick,content:"Submit",style:{backgroundColor:"#1BB394",color:"#E5FFFB",float:"right"}}),e,t))))}}]),t}(r.a.Component),bt=Object(h.b)(function(e,t){return{text:e._publishEvents.text,userid:e._loginReducer.userid,token:e._loginReducer.jwtToken,imgUrl:e._publishEvents.imgUrl,failed:e._publishEvents.failed,successful:e._publishEvents.successful}},function(e,t){return{onChangeText:function(t){e(Ie(t.target.value))},publishContent:function(t,n,a,r){e(function(e,t,n,a){return function(){var r=Object(he.a)(de.a.mark(function r(i){var o,s;return de.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=new Date,s={content:JSON.stringify({data:n,imgUrl:a}),contentId:"",displayName:"",publishTime:o,userId:t},r.next=4,fetch(ve+"/api/content/create",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()}).then(function(e){console.log(e),"success"===e.result?(i({type:J}),i(Ie("")),i({type:K,payload:""})):i({type:Y})}).catch(function(e){console.log(e),i({type:Y})});case 4:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()}(t,n,a,r))},publishFail:function(){e({type:Y})},closePublishFail:function(){e(Ne())},closePublishSuccess:function(){e(Ae())}}})(ft);var yt=function(e){var t=function(t){function n(){return Object(ie.a)(this,n),Object(se.a)(this,Object(ce.a)(n).apply(this,arguments))}return Object(le.a)(n,t),Object(oe.a)(n,[{key:"componentWillMount",value:function(){this.checkAuth()}},{key:"componentWillReceiveProps",value:function(e,t){this.checkAuth()}},{key:"checkAuth",value:function(){this.props.isLogin?this.props.closeIllegalAccess():(this.props.illegalAccess(),d.push("/"),this.props.switchHome())}},{key:"render",value:function(){return r.a.createElement("div",null,!0===this.props.isLogin?r.a.createElement(e,this.props):null)}}]),n}(r.a.Component);return Object(h.b)(function(e,t){return{isLogin:e._loginReducer.isLogin}},function(e,t){return{switchHome:function(){e(me())},illegalAccess:function(){e({type:j})},closeIllegalAccess:function(){e(ye())}}})(t)},vt=n(364),Et={border:"none",borderRadius:0,boxShadow:"none",marginBottom:"-1em",marginTop:"-1em",transition:"box-shadow 0.5s ease, padding 0.5s ease",backgroundColor:"#1BB394"},Ot={border:"0px solid #ddd",boxShadow:"0px 3px 5px rgba(0, 0, 0, 0.2)",backgroundColor:"#1BB394"},jt={color:"#E5FFFB"},Ct=function(e){function t(){var e,n;Object(ie.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(se.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(r)))).state={menuFixed:!1,overlayFixed:!1},n.stickTopMenu=function(){return n.setState({menuFixed:!0})},n.unStickTopMenu=function(){return n.setState({menuFixed:!1})},n.handleIndexClick=function(){if(n.props.switchIndex(),!0===n.props.isLogin){var e=new Date;n.props.updateTimeline(n.props.token,n.props.end.toISOString(),e.toISOString()),n.props.onUpdate(e)}},n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e,t=this.state,n=t.menuFixed;t.overlayFixed;return e=this.props.isLogin?r.a.createElement(vt.a.Menu,{position:"right"},r.a.createElement(vt.a.Item,{content:"Log out",onClick:this.props.onLogOut,style:jt})):r.a.createElement(vt.a.Menu,{position:"right"},r.a.createElement(ue.a,{to:"/login",className:this.props.login,style:jt,onClick:this.props.switchLogin},"Log in"),r.a.createElement(ue.a,{to:"/register",className:this.props.register,style:jt,onClick:this.props.switchRegister},"Sign Up")),r.a.createElement(Be.a,{vertical:!0},r.a.createElement(vt.a,{boardless:!0,fixed:n?"top":void 0,style:n?Ot:Et},r.a.createElement(Re.a,{text:!0},r.a.createElement(ue.a,{to:"/",className:this.props.home,onClick:this.props.switchHome,style:jt},"Home"),r.a.createElement(ue.a,{to:"/main",className:this.props.index,onClick:this.handleIndexClick,style:jt},"TimeLine"),r.a.createElement(ue.a,{to:"/publish",className:this.props.publish,onClick:this.props.switchPublish,style:jt},"Publish"),e)))}}]),t}(r.a.Component),St=Object(h.b)(function(e,t){return{home:e._currentPage.home,index:e._currentPage.index,publish:e._currentPage.publish,login:e._currentPage.login,register:e._currentPage.register,isLogin:e._loginReducer.isLogin,token:e._loginReducer.jwtToken,end:e._timelineEvents.end}},function(e,t){return{onUpdate:function(t){e(Oe(t))},updateTimeline:function(t,n,a){e(Ce(t,n,a))},switchHome:function(){e(Ae()),e(Ne()),e(ke()),e(Se()),e(me())},switchIndex:function(){e(Ae()),e(Ne()),e(ke()),e(Se()),e(ge())},switchPublish:function(){e(Ae()),e(Ne()),e(ke()),e(Se()),e({type:v})},switchLogin:function(){e(Ae()),e(Ne()),e(ke()),e(Se()),e(fe())},switchRegister:function(){e(Ae()),e(Ne()),e(ke()),e(Se()),e(be())},onLogOut:function(){e({type:I}),e(me()),d.push("/")}}})(Ct);o.a.render(r.a.createElement(h.a,{store:re},r.a.createElement(s.a,{history:d},r.a.createElement("div",null,r.a.createElement(St,null),r.a.createElement(c.a,null,r.a.createElement(l.a,{exact:!0,path:"/",component:He}),r.a.createElement(l.a,{path:"/main",component:yt(et)}),r.a.createElement(l.a,{path:"/login",component:st}),r.a.createElement(l.a,{path:"/publish",component:yt(bt)}),r.a.createElement(l.a,{path:"/register",component:lt}),r.a.createElement(u.a,{to:"/"}))))),document.getElementById("root"))}},[[200,2,1]]]);
//# sourceMappingURL=main.819d2ff4.chunk.js.map